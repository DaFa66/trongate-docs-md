# Using Debug Mode


The Trongate Model class includes a 'Debug Mode' feature that allows developers to inspect the raw SQL queries generated by their application. By default, Debug Mode is disabled. To enable it, follow these steps:


1. Open the **Model.php** file located in the application's engine directory.
2. Navigate to the top of the file where a private variable named `$debug` can be found.
3. Change the value of `$debug` from `false` to `true`.


For example:

```php
private $debug = true;
```


With Debug Mode enabled, PDO will display the SQL queries that will be executed by the application.

## Debug Mode Screenshot

![Diagram of Trongate Modules Directory](images/debug_mode.webp)
        
*A screenshot demonstrating a webpage with Debug Mode enabled.*
> [!NOTE]
> **Just To Let You Know...**
>
> Trongate utilizes PDO (PHP Data Objects), a flexible and secure PHP extension, for interacting with databases. PDO supports multiple database systems, providing a consistent interface to query databases regardless of the backend. It offers prepared statements to help prevent SQL injection attacks and facilitates efficient database access and management. Debug Mode in Trongate allows developers to preview SQL queries before execution, aiding in debugging and optimizing database interactions.


## Testing Debug Mode


This section demonstrates a practical example of Debug Mode in the Trongate Model class. A test database table named `students` will be created, and its records will be retrieved using the Model class. The goal is to fetch some database records and then inspect the raw SQL query by having debug mode set to **true**.

### Step 1: Create a Test Database Table


Before testing Debug Mode, a test table must be created in the database. The table, named `students`, will contain the following columns:


- **first_name** (varchar)
- **last_name** (varchar)
- **email_address** (varchar)


The following SQL statement can be used to create the table and insert sample data:

```
CREATE TABLE students (
    id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    email_address VARCHAR(100) NOT NULL
);

INSERT INTO students (first_name, last_name, email_address) VALUES
('John', 'Doe', 'john.doe@example.com'),
('Jane', 'Smith', 'jane.smith@example.com'),
('Alice', 'Johnson', 'alice.johnson@example.com'),
('Bob', 'Brown', 'bob.brown@example.com'),
('Charlie', 'Davis', 'charlie.davis@example.com');
```


Executing this SQL statement in the database will create the table and insert five test records.

### Step 2: Fetching Data from the students Table


Once the `students` table is set up, a method can be created in the Controller to fetch all records using the Model class.

> [!NOTE]
> **Just To Let You Know...**
>
> In object-oriented programming, a **method** is a function that belongs to a class.



The following method retrieves all records from the `students` table:

```php
public function test() {
    // Fetch all records from the 'students' table
    $rows = $this->model->get('id', 'students');
    
    // Display the records in JSON format
    json($rows);
}
```

> [!NOTE]
> **Just To Let You Know...**
>
> In a Trongate application, methods such as `test()` should be placed inside the main controller file of a module. The Trongate framework follows a modular architecture, where each module is a self-contained directory housing its own controllers, views and other assets.
> 
> 
> To invoke the `test()` method via a URL, the request must adhere to Trongate's routing convention. This means the base URL should be followed by a first URL segment corresponding to the directory name of the module, and a second URL segment specifying the method to be executed.
> 
> 
> For example, if the base URL of your application is `https://example.com/` and the `test()` method resides in the controller of a module named `welcome`, the correct URL to invoke the method would be:
> 
> ```
> https://example.com/welcome/test
> ```
> 
> 
> This URL structure ensures that Trongate correctly maps the request to the appropriate module and method, facilitating clean and organised application logic.



This `test()` method invokes get() - which is part of the Model class - to fetch all records from the `students` table, ordered by `id`.  The method then invokes json() to output the fetched rows in JSON format.

### Step 3: Enable Debug Mode


To inspect the raw SQL query being executed, Debug Mode must be enabled. This is done by modifying the `Model.php` file and setting `$debug = true;` as shown below:

```php
private $debug = true;
```

### Step 4: Running the Test with Debug Mode Enabled


Once Debug Mode is enabled, the `test()` method should be executed by visiting the corresponding URL in a web browser. With Debug Mode active, the raw SQL query will be displayed at the top of the page, followed by the JSON output of the retrieved records.


For example, the displayed SQL query may resemble the following:

```
SELECT id, first_name, last_name, email_address FROM students
```


The JSON-encoded result set will be displayed below:

```
[
    {"id": 1, "first_name": "John", "last_name": "Doe", "email_address": "john.doe@example.com"},
    {"id": 2, "first_name": "Jane", "last_name": "Smith", "email_address": "jane.smith@example.com"},
    {"id": 3, "first_name": "Alice", "last_name": "Johnson", "email_address": "alice.johnson@example.com"},
    {"id": 4, "first_name": "Bob", "last_name": "Brown", "email_address": "bob.brown@example.com"},
    {"id": 5, "first_name": "Charlie", "last_name": "Davis", "email_address": "charlie.davis@example.com"}
]
```


The raw SQL query is now visible, providing insights into the underlying database operations.

### Step 5: Additional Methods in the Model Class


Debug Mode helps verify that queries are executed as expected. In this example, the get() method from the Model class was used to fetch database records.


The Trongate Model class includes several additional methods for database interaction. These methods will be covered in the next section.

